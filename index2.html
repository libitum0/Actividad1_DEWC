<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Moda-Media-Mediana</title>

	<script type="text/javascript">
	
	let listaNumeros = [] //Array que almacena la lista de números introducidos por teclado
	let indice=0; //almacena el total de números introducidos
	let sumaTotal=0;//Almacena la suma total para posterior cálculo de la media
    let numero=prompt("Introduce un número [Para terminar pulsa q]: ");//caracter de escape para salir del bucle
	var listaRepetidos = []
	var numrep =0

  while(numero !== "q") {
	
	 if ((parseInt(numero) >=0) && (parseInt(numero) <=100)){
		listaNumeros[indice] = parseInt(numero)
		indice++
		sumaTotal+= parseInt(numero);
	}else
	{
		alert("Número fuera de rango, prueba con otro entre 0 y 100")
	}

	numero=prompt("Introduce un número entre 0 y 100 [Para terminar pulsa q]: ");
}
    //return(listaNumeros)
	if (listaNumeros.length==0) {
		console.log("cuidadín que divides entre cero")
	}else{
    	console.log(listaNumeros)
		listaordenados =listaNumeros.sort((a,b)=>{
			if (a==b){
				return 0;
			}
			if (a<b){
				return -1
			}else{
				return 1
			}
		})
		console.log(listaNumeros)
		//console.log(sumaTotal)
		//console.log(indice)
		//console.log(sumaTotal/indice)

		
		}
		
	
		posicion = 0
		maximo = 0
		for (let i=1; i<listaNumeros.length;i++){
			if (listaNumeros[i-1]==listaNumeros[i]){
				numrep++
		    	listaRepetidos[i] =numrep
				//calcular el que más se repite
				if (maximo< listaRepetidos[i]){
				maximo= listaRepetidos[i]
				posicion =i
			}
			}
			else{
			numrep =1
			//listaRepetidos[i-1] =numrep
			listaRepetidos[i] =numrep
			}
		}
		listaRepetidos[0]=1
		if (maximo == 0){
			console.log("no hay moda")
		}
		else{
			console.log(listaRepetidos)
			console.log ("yo soy la moda "+listaordenados[posicion])
			console.log ("y me he repetido " +maximo)
		}
		
		if (listaordenados.length %2 ==0){
			j= listaordenados.length/2
			mediana = (listaordenados[j]+listaordenados[j+1])/2
			console.log("la mediana es: "+mediana)
		}
		else{
			j= (listaordenados.length+1)/2
			mediana = (listaordenados[j-1])
			console.log("la mediana es: "+mediana)
		}	
	</script>

</head>


<body>
	<h1>La Media de los números introducidos es: </h1>
	
</body>
</html>